<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Client by LUKCAD</title>
    <style>
        body {
            font-family: "Lato", sans-serif;
        }

        .sidenav details {
            color: #f1f1f1;
        }

        .sidenav details summary {
            padding: 4px 4px 0px 0px;
            font-size: 14px;
            color: #cec7c7;
            cursor: pointer;
        }

        .sidenav details summary:hover {
            color: #f1f1f1;

        }

        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #111;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 10px;
        }

        .sidenav a {
            padding: 4px 4px 4px 16px;
            text-decoration: none;
            font-size: 13px;
            color: #818181;
            display: block;
            transition: 0.3s;
        }

        .sidenav a:hover {
            color: #f1f1f1;
        }

        .sidenav .closebtn {
            position: absolute;
            top: 0;
            right: 5px;
            font-size: 34px;
            margin-left: 100px;
        }

        .sidenav p {
            padding: 4px 48px 4px 16px;
            text-decoration: none;
            font-size: 12px;
            color: #ddf316;
            display: block;
            transition: 0.3s;
        }

        h4 {
            color: green;
        }

        .container {
            margin: 5px;
        }

        .container details {
   
            margin: 0px;
        }

        .container details summary {
            font-size: 14px;
        }

        .container details p {
            margin: 3px;
            font-size: 12px;
            color: rgb(147, 11, 238);
        }

        .container p {
            margin: 3px;
            font-size: 12px;
        }

        div.topRow {
            width:100%;
            clear:both;
        }
        div.leftCol {
            width:50%;
            float:left;
        }
        div.rightCol {
            width:50%;
            float:right;
        }
        input {
            width: 100%;
        }
        textarea {
            width: 100%;
        }

        .btn {
            background-color: DodgerBlue;
            border: none;
            color: white;
            padding: 4px 4px;
            font-size: 12px;
            cursor: pointer;

        }

        .btn:hover {
            background-color: RoyalBlue;
        }

        div.histRow {
            display: table;
            padding: 2px;
            width: 100%;
            font-size: 12px;
        }

        .histText {
           
            padding: 4px 4px;
            margin: 2px;
            width: 100%;
            display: table-cell;
            background-color: rgb(232, 235, 241);
            cursor: pointer;
        }
        .histText:hover {

            background-color: rgb(179, 199, 240);

        }
        .histBtn {
            cursor: pointer;
      
            width: auto;
            padding: 4px 4px;
            display: table-cell;
            vertical-align: middle;
            margin: 2px;

        }

        .histBtn:hover {
            background-color: rgb(179, 199, 240);
        }

        div.wshistrow {
            display: table;
            padding: 1px;
            width: 100%;
            font-size: 12px;  
            float:right;          
        }

        p.wshistname {
            padding-right: 14px;
            margin: 2px;
            width: 100%;
            display: table-cell;
            cursor: pointer;
            color: rgb(179, 199, 240);
            word-break: break-all;
        }

        p.wshistname:hover {

            color: white;
        }

        p.wshistclose {
            cursor: pointer;
      
            width: auto;
            padding: 4px 4px;
            display: table-cell;
            vertical-align: middle;
            margin: 2px;
  
        }

        p.wshistclose:hover {background: #bbb;}

        details.wsproject {
            padding-left: 4px;
            width: 100%;
        }

        .wssummary {
            padding-left: 0px;
            width: 100%;
            float:right;
        }

        div.wsprojectrow {
            display: table;
            width: 90%;
            font-size: 1px;  
            float:right;          
        }

        p.wsprojectname {
            margin: 2px;
            width: 100%;
            display: table-cell;
            word-wrap: break-word;
            word-break: break-all;
            cursor: pointer;
        }
        p.wsprojectname:hover {
            background: #2c2c2c;
        }        

        p.wsprojectclose {
            cursor: pointer;
      
            width: auto;
            padding: 4px 4px;
            display: table-cell;
            vertical-align: middle;
            margin: 2px;
  
        }

        p.wsprojectclose:hover {background: #bbb;}        

    </style>
</head>

<body>

    <div id="barSideNav" class="sidenav">
        <a href="javascript:void(0)"  class="closebtn" onclick="closeNav()">&times;</a>
        <details><summary>WS projects:</summary>
        <p>In this panel you can choose previously created WS Project where you combine relevant ws-servers and relevant messages by the same way how for History but isolated by name of project. Projects have ability to be exported and imported.</p>
        </details>
        <div id="listWsProjects"></div>        
        <details><summary onclick="swithToHistory()" >History WS servers:</summary>
        <p>In this panel you can choose previously successfuly used web socket servers that we stored in history of your web browser during your testing. If this list is empty, try send something to demoserver which is proposed by default.</p>
        </details>
        <div id="listWsServersHistory"></div>
    </div>    
    
    <div class="container">
        <h4><div style="cursor:pointer" onclick="openNav()">&#9776; WebSocket Client</div></h4>
        <details><summary>WS Project:</summary>
            <p> You can point name of project and your next operations with ws-servers you can later reuse in separate cluster from main history. Give meaningful name of project and run under project any socket and then you can find this name in WS Projects of left side bar.</p>
        </details>
        <input type="text" id="nameProject" onchange="changeProejct()" value="" /> </br>
        <details><summary>WS Server to interact with messages:</summary>
        <p>You should point here your ws server manually or choose from left navigation panel &#9776; from list of history of previously used WS servers. Once it is done you can use buttons Reconnect ot Diconnest.</p>
        </details>
        <input type="text" id="nameServer" value="wss://echo.websocket.org" /> </br>
        <details><summary>Message:</summary>
        <p>You should enter text message or json message and press Send button to send message to WS server. Notice: previously you should be connected to WS server using button Reconnect</p>
        </details>
        <textarea rows = "4"  id="messageInput"></textarea></br>
        <button class="btn" onclick="sendMessage()">Send</button>
		<button class="btn" onclick="closeConnect()">Disconnect</button>
		<button class="btn" onclick="reConnect()">Reconnect</button>
        <button class="btn" onclick="clearScreen()">Clean Messages</button>
 
        <div class="main">
            <div class="topRow"></div>
            <div class="leftCol"><details><summary>Messages:</summary><p>This panal expose your requests and responses betwen your client and WS server. Errored messages have red colour.</p></details></div>
            <div class="rightCol"><details><summary>History of sending unical messages:</summary><p>This panel has list of wunique messages that were successfuly sent to ws server. If you press any message the value of message will be inserted to Message box and you can resend it again.</p></details></div>
        <div>
        <div class="main">
            <div class="topRow"></div>
            <div id="output" class="leftCol"></div>
            <div id="history" class="rightCol"></div>
        <div>            
    </div>

    <script>
        // Create a WebSocket instance
        // and connect to the server
        var socket;
		var wsUri;
        var wsUriClosing;
        var wsProjectId;
        var wsProjectName;

        initProjectNameAndId()

        // left bar navigation for `WS projects`

        var arrProjects = [];
        var json_projects_str = localStorage.getItem("wsmsprojects")? localStorage.getItem("wsmsprojects") : '[]';
        var arrProjectsraw = JSON.parse(json_projects_str);

        for (let index = 0; index < arrProjectsraw.length; index++) {
            const element = arrProjectsraw[index];
            if (element !== null){
                arrProjects.push(element);
            }
        }       

        // left bar navigation for `History WS servers`
        var arrNav;

        function setArrWSservers() {
            arrNav = [];
            var json_srv_str = localStorage.getItem(`${wsProjectId}wsmsservers`)? localStorage.getItem(`${wsProjectId}wsmsservers`) : '[]';
            var arrnavraw = JSON.parse(json_srv_str);
            

            for (let index = 0; index < arrnavraw.length; index++) {
                const element = arrnavraw[index];
                if (element !== null){
                    arrNav.push(element);
                }
            }
        }

        function getArrWSserversBy(_wsProjectId) {
            _arrNav = [];
            var json_srv_str = localStorage.getItem(`${_wsProjectId}wsmsservers`)? localStorage.getItem(`${_wsProjectId}wsmsservers`) : '[]';
            var arrnavraw = JSON.parse(json_srv_str);
            

            for (let index = 0; index < arrnavraw.length; index++) {
                const element = arrnavraw[index];
                if (element !== null){
                    _arrNav.push(element);
                }
            }
            return _arrNav;
        }

        // history messages navigation
        var arr;

        function setArrHistory() {
            arr = [];
            var json_str = localStorage.getItem(`${wsProjectId}wsmshistory`)? localStorage.getItem(`${wsProjectId}wsmshistory`) : '[]';
            var arrraw = JSON.parse(json_str);
            

            for (let index = 0; index < arrraw.length; index++) {
                const element = arrraw[index];
                if (element !== null){
                    arr.push(element);
                }
                
            }
        }

        function swithToHistory() {

            if (wsProjectId != ''){
                wsProjectName = document.getElementById("nameProject").value = '';
                setProjectId();
                setArrHistory();
                reloadHistory();
                setArrWSservers();
                reloaNav(); 
            }

        }



        function setProjectId(){

            wsProjectName = (document.getElementById("nameProject").value ?? '').trim();
            var _wsProjectId = `${wsProjectName.replace(/[^A-Za-z0-9]/g, '')}`;
            wsProjectId = (_wsProjectId !== '')? `${_wsProjectId}_`: '';
            localStorage.setItem("wsmsprojectactive",wsProjectName);
            console.log(wsProjectId);

        }

        function convertProjectNameToId(wsprojectname){
            var _wsProjectId = `${wsprojectname.replace(/[^A-Za-z0-9]/g, '')}`;
            return (_wsProjectId !== '')? `${_wsProjectId}_`: '';
        }

        function initProjectNameAndId() {
            wsProjectName = localStorage.getItem("wsmsprojectactive")? localStorage.getItem("wsmsprojectactive") : '';
            document.getElementById('nameProject').value = wsProjectName;
            setProjectId();
        }

        function initInputOfWeServer() {
            wsUri = localStorage.getItem("wsmsserveractive")? localStorage.getItem("wsmsserveractive") : 'wss://echo.websocket.org';
            document.getElementById('nameServer').value = wsUri;
        }

        function addProjectElement(wsproject) {
            var wsprojectname = document.createElement("p"); 
            wsprojectname.style.wordWrap = "break-word"; 
            wsprojectname.className ="wsprojectname"
            wsprojectname.onclick = chooseWsProject;
            wsprojectname.title = "Choose this WS server";
            wsprojectname.innerHTML = `${wsproject}`; 

            var wsprojectclose = document.createElement("p"); 
            wsprojectclose.title = "remove from history";
            wsprojectclose.onclick = removeWsProject;
            wsprojectclose.className = "wsprojectclose";
            wsprojectclose.innerHTML = "&times;";
        
            var wsprojectrow = document.createElement("div"); 
            wsprojectrow.className = "wsprojectrow"; 
            wsprojectrow.appendChild(wsprojectname);
            wsprojectrow.appendChild(wsprojectclose);

            var wsprojectsummary = document.createElement("summary"); 
            wsprojectsummary.className = "wssummary";
            wsprojectsummary.appendChild(wsprojectrow);

            var wsprojectserverslist = document.createElement("div"); 
            wsprojectserverslist.setAttribute("id", `${convertProjectNameToId(wsproject)}listWsServersHistory`);
                  

            var wsprojectdetails = document.createElement("details"); 
            wsprojectdetails.ontoggle = addweservers;
            wsprojectdetails.className = "wsproject";
            wsprojectdetails.appendChild(wsprojectsummary);
            wsprojectdetails.appendChild(wsprojectserverslist);  

            const barSideProjectnav = document
            .getElementById('listWsProjects');
            barSideProjectnav.appendChild(wsprojectdetails);  
            
            function addweservers() {
                var _wsProjectId = convertProjectNameToId(wsproject);
                var _arrNav = getArrWSserversBy(_wsProjectId)??[];
                reloaNavBy(wsproject, _arrNav);

            }
            
            function chooseWsProject() {
                var anotherproject = false;
                // if user choosed another server then close existing server
                if (wsproject !== wsProjectName) {
                    //closeConnect();
                    anotherproject = true;
                }
                wsProjectName = document.getElementById('nameProject').value = wsproject;

                if (anotherproject) {
                    
                    //reConnect();
                   
                    setProjectId();
                    setArrHistory();
                    reloadHistory();
                    setArrWSservers();
                    reloaNav();

                }
                // close side bar
                document.getElementById("barSideNav").style.width = "0";
            }
            
            function removeWsProject() {
                var result = confirm(`Want to delete WS project: "${wsproject}" ? Message history and WS servers of project will be deleted as well.`);
                if (result) {
                    var _wsProjectId = convertProjectNameToId(wsproject)??'';
                    var deleteactivews = false;
                    if (wsproject === wsProjectName){
                            console.log('delete active');
                            deleteactivews = true;
                            //closeConnect();
                        }                    
                    if (arrProjects.indexOf(wsproject) >= 0) {
                        var indextoremove = arrProjects.indexOf(wsproject);
                        var newarrprojects = [];
                        for (let index = 0; index < arrProjects.length; index++) {

                            if(index !== indextoremove)
                            {
                                if (arrProjects[index] !== null) {
                                    newarrprojects.push(arrProjects[index]);
                                }
                            } 
                        }
                        arrProjects = newarrprojects;

                        var json_projects_str = JSON.stringify(arrProjects);
                        localStorage.setItem("wsmsprojects", json_projects_str);

                        if (_wsProjectId !== ''){
                            if (localStorage.getItem(`${_wsProjectId}listWsServersHistory`)) {
                                    localStorage.removeItem(`${_wsProjectId}listWsServersHistory`);
                            }
                            if (localStorage.getItem(`${_wsProjectId}wsmshistory`)) {
                                    localStorage.removeItem(`${_wsProjectId}wsmshistory`);
                            }
                        }

                        this.parentElement.parentElement.remove();
  
                        if (deleteactivews){
                            
                            document.getElementById("nameProject").value = '';
                            wsProjectName = '';
                            setProjectId();
                            setArrHistory();
                            reloadHistory();
                            setArrWSservers();
                            reloaNav();
                            reloadProjects();
                        }
                        
                        // close side bar
                        document.getElementById("barSideNav").style.width = "0";
                    }
                }
            }
        }


        function addNavElement(wsserver, wrprojectname) {

            var wsproject_id = convertProjectNameToId(wrprojectname)??'';
            var wshistname = document.createElement("p"); 
            wshistname.style.wordWrap = "break-word"; 
            wshistname.className ="wshistname"
           // wshistname.href = `javascript:void(0)`;
            wshistname.onclick = chooseWsServer;
            wshistname.title = "click to choose";
            wshistname.setAttribute("prjname",wrprojectname);
            wshistname.innerHTML = `${wsserver}`; 

            var wshistclose = document.createElement("p"); 
            wshistclose.title = "remove from history";
            wshistclose.onclick = removeWsServer;
            wshistclose.className = "wshistclose";
            wshistclose.setAttribute("prjname",wrprojectname);
            wshistclose.innerHTML = "&times;";
        
            var wshistrow = document.createElement("div"); 
            wshistrow.className = "wshistrow"; 
            wshistrow.appendChild(wshistname);
            wshistrow.appendChild(wshistclose);

            const barSidenav = document
            .getElementById(`${wsproject_id}listWsServersHistory`);
            barSidenav.appendChild(wshistrow);
           
            function chooseWsServer() {
                var _wsProjectName = this.getAttribute("prjname") ?? '';
                var anotherProject = false;
                if (wsProjectName !== _wsProjectName){
                    anotherProject = true;
                }

                var anotherserver = false;
                // if user choosed another server then close existing server
                if (wsserver !== wsUri) {
                    closeConnect();
                    anotherserver = true;
                }
                wsUri = document.getElementById('nameServer').value = wsserver;
            

                if (anotherserver) {
                    
                    reConnect();
                    localStorage.setItem("wsmsserveractive",wsUri);
                }

                if (anotherProject) {
                    wsProjectName = document.getElementById('nameProject').value = _wsProjectName;
                    setProjectId();
                    setArrHistory();
                    reloadHistory();
                }
                // close side bar
                document.getElementById("barSideNav").style.width = "0";
            }

            function removeWsServer() {
                var result = confirm(`Want to delete WS server: "${wsserver}" ?`);
                if (result) {
                    var _wsProjectName = this.getAttribute("prjname") ?? '';
                    var anotherProject = false;
                    if (wsProjectName !== _wsProjectName){
                        anotherProject = true;
                    }

                    if (anotherProject) {
                        var _wsProjectId = convertProjectNameToId(_wsProjectName);
                        var _arrNav = getArrWSserversBy(_wsProjectId)??[];
                        var indextoremove = _arrNav.indexOf(wsserver);
                        var newarrnav = [];
                        for (let index = 0; index < _arrNav.length; index++) {

                            if(index !== indextoremove)
                            {
                                if (_arrNav[index] !== null) {
                                    newarrnav.push(_arrNav[index]);
                                }
                            } 
                        }
                        _arrNav = newarrnav;
                        var json_nav_str = JSON.stringify(_arrNav);
                        
                        localStorage.setItem(`${_wsProjectId}wsmsservers`, json_nav_str);
                        this.parentElement.remove();
  
                    }
                    else {
                        var deleteactivews = false;
                        if (wsserver === wsUri){
                                console.log('delete active');
                                deleteactivews = true;
                                closeConnect();
                            }                    
                        if (arrNav.indexOf(wsserver) >= 0) {
                            var indextoremove = arrNav.indexOf(wsserver);
                            var newarrnav = [];
                            for (let index = 0; index < arrNav.length; index++) {

                                if(index !== indextoremove)
                                {
                                    if (arrNav[index] !== null) {
                                        newarrnav.push(arrNav[index]);
                                    }
                                } 
                            }
                            arrNav = newarrnav;

                            var json_nav_str = JSON.stringify(arrNav);
                            localStorage.setItem(`${wsProjectId}wsmsservers`, json_nav_str);
    
                            if (deleteactivews){
                                document.getElementById("nameServer").value = '';
                                wsUri = '';
                                localStorage.setItem("wsmsserveractive",wsUri);
                            }
                            reloaNav();
                            // close side bar
                            
                        }
                    }

 
                    document.getElementById("barSideNav").style.width = "0";
                }
            }
        }
      
        function reloaNav() {
            document.getElementById(`${wsProjectId}listWsServersHistory`).innerHTML = '';
            arrNav.forEach((item) => {
            addNavElement(`${item}`,`${wsProjectName}`);
            })
        }  

        function reloaNavBy(_wsProjectName, _arrNav) {
            var _wsProjectId = convertProjectNameToId(_wsProjectName)??'';
            document.getElementById(`${_wsProjectId}listWsServersHistory`).innerHTML = '';
            _arrNav.forEach((item) => {
            addNavElement(`${item}`,`${_wsProjectName}`);
            })
        } 

        function reloadProjects() {
            document.getElementById('listWsProjects').innerHTML = '';
            arrProjects.forEach((item) => {
            addProjectElement(`${item}`);
            })
        }

        function openNav() {
        document.getElementById("barSideNav").style.width = "250px";
        }

        function closeNav() {
        document.getElementById("barSideNav").style.width = "0";
        }        

        function reloadHistory() {
            document.getElementById('history').innerHTML = '';
            arr.forEach((item) => {
                console.log(item);
                writeToHistory(`${item}`, 'brown');
            })
        }
		
		function reConnect() {
		
			 wsUri = document.getElementById("nameServer").value;
			 socket = new WebSocket(wsUri);
			
			 socket.onopen = function(evt) {
				onOpen(evt)
			 };
			
			 socket.onclose = function(evt) {
				onClose(evt)
			 };
			
			 socket.onmessage = function(evt) {
				onMessage(evt)
			 };
			
			 socket.onerror = function(evt) {
				onError(evt)
			 };
		}

        // Event listener for when 
        //the WebSocket connection is opened
        onOpen = function (event) {
            // Write message that users is 
            // connected to the WebSocket server
            writeToScreen(`You are Connected to Server "${wsUri}"`, 'green');

        };

        // Event listener for when a message
        //  is received from the server
        onMessage = function (event) {
            writeToScreen(`Response message: ${event.data}`, 'green');
        };

        // Event listener for when the 
        // WebSocket connection is closed
        onClose = function (event) {
            // Log a message when disconnected
            //  from the WebSocket server
            //console.log('Disconnected from WebSocket server');
			writeToScreen(`You are disconnected from Server "${wsUriClosing}". Code: ${event.code} `, 'red');
        };

		// Event listener for when the 
		// WebSocket sending message had error
		onError = function (event) {
			writeToScreen(`It was error.`, 'red');
        };

        // Function to send a message
        //  to the WebSocket server
        function sendMessage() {
            // Get the message input element
            const messageInput = document
                .getElementById('messageInput');
            // Get the value of
            // the message input
            const message = messageInput.value;

			if (socket.readyState === WebSocket.OPEN) {
				// Send the message to 
				// the WebSocket server			
				socket.send(message);
				// and show what we sent
				writeToScreen(`Sent message: ${message}`, 'blue');

                var nameProject = (document
                .getElementById('nameProject').value ?? '').trim();
                if (nameProject !== '') {
                    if (arrProjects.indexOf(nameProject) < 0) {
                        arrProjects.push(nameProject);
                        var json_prj_str = JSON.stringify(arrProjects);
                        localStorage.setItem("wsmsprojects", json_prj_str);
                        setProjectId();
                        reloadProjects();
                        setArrHistory();
                        reloadHistory();
                        setArrWSservers();
                        reloaNav();  
                    }
                } else {
                    if (wsProjectId != '') {
                        setProjectId();
                        setArrHistory();
                        reloadHistory();
                        setArrWSservers();
                        reloaNav();                         
                    }
                }


                
                if (arr.indexOf(message) < 0) {
                    arr.push(message);
                    var json_str = JSON.stringify(arr);
                    localStorage.setItem(`${wsProjectId}wsmshistory`, json_str);
                    writeToHistory(`${message}`, 'brown');
                }
               
                if (arrNav.indexOf(wsUri) < 0) {
                    arrNav.push(wsUri);
                    var json_nav_str = JSON.stringify(arrNav);
                    localStorage.setItem(`${wsProjectId}wsmsservers`, json_nav_str);
                    reloaNav() 
                }

                localStorage.setItem("wsmsserveractive",wsUri);
                
			}
            // Clear the message input
            messageInput.value = '';
        }

        function changeProejct() {
            setProjectId();
            setArrHistory();
            reloadHistory();
            setArrWSservers();
            reloaNav();            
        }
		
        function closeConnect() {
			if (socket.readyState === WebSocket.OPEN) {
                wsUriClosing = wsUri;
				socket.close();
			}
		}	

		function writeToScreen(message, color = 'black') {
			 var pre = document.createElement("p"); 
			 pre.style.wordWrap = "break-word"; 
			 pre.style.color = `${color}`;
			 pre.innerHTML = message; 
			 const outputDiv = document
                .getElementById('output');
			 outputDiv.appendChild(pre);
            
	    }

        function writeToHistory(message, color = 'black') {

            var histText = document.createElement("p"); 
            histText.style.wordWrap = "break-word"; 
            histText.style.color = `${color}`;
            histText.innerHTML = message; 
            histText.className = "histText";
            histText.onclick = copyToMessage;

            var delbtn = document.createElement("p"); 
            delbtn.className = "histBtn"; 
            delbtn.title = "Delete message from history";
            delbtn.onclick = delMessageFromHistory;
            delbtn.innerHTML = "&times;"; 
              
            var histRow = document.createElement("div"); 
            histRow.className = "histRow"; 
            histRow.appendChild(histText);
            histRow.appendChild(delbtn);

            const historyDiv = document
                .getElementById('history');
            historyDiv.appendChild(histRow);

            function copyToMessage(){
                var messageInput = document
                .getElementById('messageInput');
                messageInput.value = message;
            }

            function delMessageFromHistory() {

                var result = confirm(`Want to delete from history: "${message}" ?`);
                if (result) {
                    if (arr.indexOf(message) >= 0) {
                        var indextoremove = arr.indexOf(message);
                        var newarr = [];
                        for (let index = 0; index < arr.length; index++) {
                            var element = arr[index];
                            if (indextoremove !== index) {
                                newarr.push(element);
                            }
                        }
                        arr = newarr;
                        var json_str = JSON.stringify(arr);
                        localStorage.setItem(`${wsProjectId}wsmshistory`, json_str);
                        reloadHistory()

                    }   
                }             
            }
	    }



        function clearScreen() {

             document.getElementById("output").innerHTML = "";
	    }

        
		initInputOfWeServer();
		reConnect();
        setArrHistory();
        reloadHistory();
        reloadProjects();
        setArrWSservers();
        reloaNav();

    </script>
</body>

</html>
